<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maquette</title>

  <!-- Google Fonts selon le Design Brief -->
  <link href="https://fonts.googleapis.com/css2?family=Quattrocento:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Leaflet CSS (pour cartes si n√©cessaire) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

    /* Polices du Design Brief */
    .font-display { font-family: 'Quattrocento', serif; }
    .font-body { font-family: 'Quattrocento', sans-serif; }

    /* Appliquer la police body par d√©faut */
    body { font-family: 'Quattrocento', sans-serif; }

    /* Animation de base pour les entr√©es */
    @keyframes fade-in-up {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-up {
      animation: fade-in-up 0.5s ease-out forwards;
      opacity: 0;
    }

    /* Animation de fade simple */
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
      animation: fade-in 0.3s ease-out forwards;
    }

    /* Animation scale */
    @keyframes scale-in {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    .animate-scale-in {
      animation: scale-in 0.3s ease-out forwards;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- CHARGEMENT S√âQUENTIEL DES CDN - NE PAS MODIFIER -->
  <script>
    (function() {
      var scripts = [
        'https://unpkg.com/react@18/umd/react.production.min.js',
        'https://unpkg.com/react-dom@18/umd/react-dom.production.min.js',
        'https://unpkg.com/prop-types@15/prop-types.min.js',
        'https://unpkg.com/recharts@2.12.7/umd/Recharts.js',
        'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js',
        'https://unpkg.com/@babel/standalone/babel.min.js'
      ];
      var index = 0;
      function loadNext() {
        if (index >= scripts.length) {
          if (typeof Babel !== 'undefined' && Babel.transformScriptTags) {
            Babel.transformScriptTags();
          }
          return;
        }
        var script = document.createElement('script');
        script.src = scripts[index];
        script.onload = function() { index++; loadNext(); };
        script.onerror = function() { console.error('Erreur CDN: ' + scripts[index]); };
        document.body.appendChild(script);
      }
      loadNext();
    })();
  </script>

  <script type="text/babel">
    // OBLIGATOIRE: Destructurer Recharts (NE PAS SUPPRIMER)
    const { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, AreaChart, Area,
            XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } = Recharts;

    // ============================================================
    // APPLICATION DE GESTION TRAITEUR - LE BANGARD INC.
    // ============================================================

    // Donn√©es mock√©es r√©alistes pour le Qu√©bec
    const mockData = {
      clients: [
        { id: 1, nom: "Jean Tremblay", entreprise: "Restaurant Chez Marcel", email: "jean@chezmarcel.ca", telephone: "(514) 555-1234", type: "B2B", credit: 10000, balance: 2450, dernierCommande: "2024-02-02" },
        { id: 2, nom: "Marie Lavoie", entreprise: "√âpicerie Lavoie & Fils", email: "marie@epicerielavoie.ca", telephone: "(514) 555-5678", type: "B2B", credit: 15000, balance: 0, dernierCommande: "2024-02-03" },
        { id: 3, nom: "Pierre Gagnon", entreprise: "Traiteur Gagnon", email: "pierre@traiteurgagnon.ca", telephone: "(450) 555-9012", type: "B2B", credit: 20000, balance: 5600, dernierCommande: "2024-01-28" },
        { id: 4, nom: "Sophie Bouchard", entreprise: "Caf√© Sophie", email: "sophie@cafesophie.ca", telephone: "(514) 555-3456", type: "B2B", credit: 8000, balance: 1200, dernierCommande: "2024-02-01" },
        { id: 5, nom: "Martin Roy", entreprise: "Boulangerie Roy", email: "martin@boulangerieroy.ca", telephone: "(438) 555-7890", type: "B2B", credit: 12000, balance: 0, dernierCommande: "2024-01-30" }
      ],

      commandes: [
        { id: 1, clientId: 1, numero: "CMD-2024-001", date: "2024-02-02", statut: "En pr√©paration", montant: 2450, items: 12, livraison: "2024-02-05 10:00" },
        { id: 2, clientId: 2, numero: "CMD-2024-002", date: "2024-02-03", statut: "Confirm√©e", montant: 1890, items: 8, livraison: "2024-02-06 14:00" },
        { id: 3, clientId: 1, numero: "CMD-2024-003", date: "2024-02-01", statut: "Livr√©e", montant: 3200, items: 15, livraison: "2024-02-01 12:00" },
        { id: 4, clientId: 3, numero: "CMD-2024-004", date: "2024-01-28", statut: "Livr√©e", montant: 5600, items: 25, livraison: "2024-01-28 18:00" },
        { id: 5, clientId: 4, numero: "CMD-2024-005", date: "2024-02-01", statut: "En production", montant: 1200, items: 6, livraison: "2024-02-04 09:00" }
      ],

      produits: [
        { id: 1, nom: "Plateau de sandwichs vari√©s", sku: "PLT-001", categorie: "Plateaux", prix: 65, stock: 50, unite: "plateau", allergenes: ["Gluten", "≈íufs", "Moutarde"] },
        { id: 2, nom: "Salade C√©sar", sku: "SAL-001", categorie: "Salades", prix: 45, stock: 30, unite: "bol", allergenes: ["≈íufs", "Poisson", "Lait"] },
        { id: 3, nom: "Wrap v√©g√©tarien", sku: "WRP-001", categorie: "Wraps", prix: 8.50, stock: 100, unite: "unit√©", allergenes: ["Gluten", "Soja"] },
        { id: 4, nom: "Box √† lunch compl√®te", sku: "BOX-001", categorie: "Bo√Ætes", prix: 18.50, stock: 75, unite: "bo√Æte", allergenes: ["Variable"] },
        { id: 5, nom: "Plateau de fruits frais", sku: "PLT-002", categorie: "Plateaux", prix: 55, stock: 40, unite: "plateau", allergenes: [] }
      ],

      recettes: [
        { id: 1, nom: "Sandwich au poulet grill√©", rendement: 10, unite: "portions", coutMatiere: 3.25, tempsPrepMinutes: 15, allergenes: ["Gluten", "Moutarde"], categorie: "Sandwichs" },
        { id: 2, nom: "Salade C√©sar maison", rendement: 20, unite: "portions", coutMatiere: 2.15, tempsPrepMinutes: 20, allergenes: ["≈íufs", "Poisson", "Lait"], categorie: "Salades" },
        { id: 3, nom: "Wrap v√©g√©tarien deluxe", rendement: 15, unite: "unit√©s", coutMatiere: 2.80, tempsPrepMinutes: 25, allergenes: ["Gluten", "Soja"], categorie: "Wraps" },
        { id: 4, nom: "Mousse au chocolat", rendement: 30, unite: "portions", coutMatiere: 1.50, tempsPrepMinutes: 45, allergenes: ["Lait", "≈íufs"], categorie: "Desserts" },
        { id: 5, nom: "Soupe du jour", rendement: 5, unite: "litres", coutMatiere: 8.00, tempsPrepMinutes: 60, allergenes: ["Variable"], categorie: "Soupes" },
        { id: 6, nom: "Plateau de crudit√©s", rendement: 25, unite: "portions", coutMatiere: 1.20, tempsPrepMinutes: 30, allergenes: [], categorie: "Plateaux" },
        { id: 7, nom: "Quiche lorraine", rendement: 8, unite: "portions", coutMatiere: 2.75, tempsPrepMinutes: 90, allergenes: ["Gluten", "≈íufs", "Lait"], categorie: "Plats chauds" },
        { id: 8, nom: "Brochettes de poulet satay", rendement: 40, unite: "unit√©s", coutMatiere: 1.95, tempsPrepMinutes: 45, allergenes: ["Arachides", "Soja"], categorie: "Bouch√©es" }
      ],

      inventaire: [
        { id: 1, nom: "Farine tout usage", sku: "ING-001", stock: 40, unite: "kg", seuil: 20, lot: "LOT-2024-015", peremption: "2024-06-15", emplacement: "R√©serve s√®che A3" },
        { id: 2, nom: "Poulet frais", sku: "ING-002", stock: 25, unite: "kg", seuil: 10, lot: "LOT-2024-022", peremption: "2024-02-08", emplacement: "Frigo 1" },
        { id: 3, nom: "Tomates fra√Æches", sku: "ING-003", stock: 15, unite: "kg", seuil: 8, lot: "LOT-2024-018", peremption: "2024-02-10", emplacement: "Frigo 2" },
        { id: 4, nom: "Huile d'olive", sku: "ING-004", stock: 20, unite: "litres", seuil: 10, lot: "LOT-2023-145", peremption: "2025-01-15", emplacement: "R√©serve s√®che B2" },
        { id: 5, nom: "Fromage parmesan", sku: "ING-005", stock: 8, unite: "kg", seuil: 5, lot: "LOT-2024-009", peremption: "2024-03-20", emplacement: "Frigo 3" }
      ],

      evenements: [
        { id: 1, nom: "Cocktail d'entreprise ABC Inc.", date: "2024-02-10", heure: "17:00", convives: 150, lieu: "Centre-ville Montr√©al", statut: "Confirm√©", responsable: "Marie Lavoie" },
        { id: 2, nom: "Lunch corporatif Banque XYZ", date: "2024-02-08", heure: "12:00", convives: 50, lieu: "Tour de la Banque", statut: "En planification", responsable: "Jean Tremblay" },
        { id: 3, nom: "Mariage Tremblay-Gagnon", date: "2024-06-15", heure: "18:00", convives: 200, lieu: "Vignoble de l'Orpailleur", statut: "Soumission", responsable: "Sophie Bouchard" }
      ],

      demandes: [
        { id: 1, source: "Email", date: "2024-02-04 09:15", client: "Nouveau client", objet: "Demande de soumission - √âv√©nement corporatif", statut: "Nouvelle", priorite: "Normale" },
        { id: 2, source: "T√©l√©phone", date: "2024-02-04 10:30", client: "Jean Tremblay", objet: "Modification commande CMD-2024-001", statut: "En traitement", priorite: "Urgente" },
        { id: 3, source: "Web", date: "2024-02-03 14:45", client: "Sophie Bouchard", objet: "Question sur allerg√®nes", statut: "Ferm√©e", priorite: "Normale" }
      ],

      stats: {
        ventesJour: 4530,
        ventesHier: 3890,
        commandesJour: 12,
        nouveauxClients: 3,
        tauxConversion: 68
      }
    };

    // √âtat de navigation 5 NIVEAUX
    function App() {
      const [activeTab, setActiveTab] = React.useState('dashboard');
      const [view, setView] = React.useState({
        screen: 'list',
        entityType: null,
        entityId: null,
        subEntityType: null,
        subEntityId: null
      });

      const [showModal, setShowModal] = React.useState(false);
      const [modalType, setModalType] = React.useState('');
      const [searchTerm, setSearchTerm] = React.useState('');

      // Navigation 5 niveaux
      const goToList = (type) => setView({
        screen: 'list', entityType: type, entityId: null, subEntityType: null, subEntityId: null
      });

      const goToDetail = (type, id) => setView({
        screen: 'detail', entityType: type, entityId: id, subEntityType: null, subEntityId: null
      });

      const goToSubList = (parentType, parentId, subType) => setView({
        screen: 'sublist', entityType: parentType, entityId: parentId, subEntityType: subType, subEntityId: null
      });

      const goToEdit = (type, id) => setView({
        screen: 'edit', entityType: type, entityId: id, subEntityType: null, subEntityId: null
      });

      const goToSubDetail = (parentType, parentId, subType, subId) => setView({
        screen: 'subdetail', entityType: parentType, entityId: parentId, subEntityType: subType, subEntityId: subId
      });

      const goToSubEdit = (parentType, parentId, subType, subId) => setView({
        screen: 'subedit', entityType: parentType, entityId: parentId, subEntityType: subType, subEntityId: subId
      });

      // Composant BackButton
      const BackButton = ({ onClick, label = "Retour" }) => (
        <button
          onClick={onClick}
          className="flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6 transition-colors"
        >
          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
          </svg>
          <span className="font-display">{label}</span>
        </button>
      );

      // Composant Card √©l√©gant - th√®me clair
      const Card = ({ children, className = "", hover = false }) => (
        <div className={`bg-white rounded-xl border border-gray-200 shadow-sm ${hover ? 'hover:border-gray-300 transition-all duration-300 hover:shadow-lg' : ''} ${className}`}>
          {children}
        </div>
      );

      // Composant Button raffin√© - th√®me clair
      const Button = ({ children, onClick, variant = "primary", size = "md", className = "" }) => {
        const variants = {
          primary: "bg-blue-600 text-white hover:bg-blue-700 border-2 border-blue-600",
          secondary: "bg-gray-100 text-gray-700 hover:bg-gray-200 border-2 border-gray-300",
          ghost: "text-gray-600 hover:text-gray-900 hover:bg-gray-100 border-2 border-transparent"
        };

        const sizes = {
          sm: "px-3 py-1.5 text-sm",
          md: "px-4 py-2",
          lg: "px-6 py-3 text-lg"
        };

        return (
          <button
            onClick={onClick}
            className={`font-display font-medium rounded-lg transition-all duration-200 ${variants[variant]} ${sizes[size]} ${className}`}
          >
            {children}
          </button>
        );
      };

      // Composant Dashboard
      const Dashboard = () => {
        const statsCards = [
          { label: "Ventes aujourd'hui", value: `${mockData.stats.ventesJour.toLocaleString()} $`, change: "+16%", icon: "üí∞" },
          { label: "Commandes", value: mockData.stats.commandesJour, change: "+3", icon: "üì¶" },
          { label: "Nouveaux clients", value: mockData.stats.nouveauxClients, change: "", icon: "üë•" },
          { label: "Taux conversion", value: `${mockData.stats.tauxConversion}%`, change: "+5%", icon: "üìà" }
        ];

        // Donn√©es pour le graphique
        const revenueData = [
          { jour: 'Lun', montant: 3200 },
          { jour: 'Mar', montant: 4100 },
          { jour: 'Mer', montant: 3800 },
          { jour: 'Jeu', montant: 3890 },
          { jour: 'Ven', montant: 4530 },
          { jour: 'Sam', montant: 5200 },
          { jour: 'Dim', montant: 2100 }
        ];

        return (
          <div className="space-y-8">
            <div className="flex items-center justify-between">
              <h1 className="text-3xl font-display font-bold text-gray-800">Tableau de bord</h1>
              <div className="text-sm text-gray-600">{new Date().toLocaleDateString('fr-CA')}</div>
            </div>

            {/* KPIs */}
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
              {statsCards.map((stat, i) => (
                <Card key={i} className="p-6 animate-fade-in-up" style={{ animationDelay: `${i * 100}ms` }}>
                  <div className="flex items-start justify-between">
                    <div className="space-y-2">
                      <p className="text-sm text-gray-600 font-body">{stat.label}</p>
                      <p className="text-2xl font-display font-bold text-gray-800">{stat.value}</p>
                      {stat.change && (
                        <p className={`text-sm ${stat.change.includes('+') ? 'text-green-400' : 'text-gray-600'}`}>
                          {stat.change}
                        </p>
                      )}
                    </div>
                    <div className="text-3xl opacity-20">{stat.icon}</div>
                  </div>
                </Card>
              ))}
            </div>

            {/* Graphique des revenus */}
            <Card className="p-6">
              <h2 className="text-xl font-display font-semibold text-gray-800 mb-6">Revenus de la semaine</h2>
              <ResponsiveContainer width="100%" height={300}>
                <AreaChart data={revenueData}>
                  <defs>
                    <linearGradient id="colorRevenue" x1="0" y1="0" x2="0" y2="1">
                      <stop offset="5%" stopColor="#000000" stopOpacity={0.3}/>
                      <stop offset="95%" stopColor="#000000" stopOpacity={0}/>
                    </linearGradient>
                  </defs>
                  <CartesianGrid strokeDasharray="3 3" stroke="#374151" />
                  <XAxis dataKey="jour" stroke="#9CA3AF" />
                  <YAxis stroke="#9CA3AF" />
                  <Tooltip
                    contentStyle={{ backgroundColor: '#1F2937', border: '1px solid #374151', borderRadius: '8px' }}
                    labelStyle={{ color: '#E5E7EB' }}
                  />
                  <Area type="monotone" dataKey="montant" stroke="#000000" fillOpacity={1} fill="url(#colorRevenue)" strokeWidth={2} />
                </AreaChart>
              </ResponsiveContainer>
            </Card>

            {/* Actions rapides */}
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <Card hover className="p-6 cursor-pointer" onClick={() => { setActiveTab('demandes'); }}>
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="font-display font-semibold text-gray-800">Nouvelles demandes</h3>
                    <p className="text-2xl font-bold text-gray-800 mt-2">3</p>
                    <p className="text-sm text-gray-600">√† traiter</p>
                  </div>
                  <svg className="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                  </svg>
                </div>
              </Card>

              <Card hover className="p-6 cursor-pointer" onClick={() => { setActiveTab('production'); }}>
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="font-display font-semibold text-gray-800">Commandes du jour</h3>
                    <p className="text-2xl font-bold text-gray-800 mt-2">12</p>
                    <p className="text-sm text-gray-600">en production</p>
                  </div>
                  <svg className="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                  </svg>
                </div>
              </Card>

              <Card hover className="p-6 cursor-pointer" onClick={() => { setActiveTab('inventaire'); }}>
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="font-display font-semibold text-gray-800">Alertes inventaire</h3>
                    <p className="text-2xl font-bold text-red-400 mt-2">2</p>
                    <p className="text-sm text-gray-600">stocks critiques</p>
                  </div>
                  <svg className="w-8 h-8 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                  </svg>
                </div>
              </Card>
            </div>
          </div>
        );
      };

      // Composant Liste des Clients
      const ClientList = ({ onSelect }) => {
        const filteredClients = mockData.clients.filter(client =>
          client.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||
          client.entreprise.toLowerCase().includes(searchTerm.toLowerCase())
        );

        return (
          <div className="space-y-6">
            <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
              <h1 className="text-2xl font-display font-bold text-gray-800">Clients</h1>
              <div className="flex gap-3">
                <input
                  type="text"
                  placeholder="Rechercher..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-black/50 focus:border-transparent"
                />
                <Button onClick={() => { setModalType('client'); setShowModal(true); }}>
                  Nouveau client
                </Button>
              </div>
            </div>

            <Card className="overflow-hidden">
              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="bg-gray-900/50 border-b border-gray-700">
                    <tr>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Nom</th>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Entreprise</th>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Contact</th>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Balance</th>
                      <th className="px-6 py-4 text-right text-sm font-display font-medium text-gray-600">Actions</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-700">
                    {filteredClients.map((client, i) => (
                      <tr
                        key={client.id}
                        onClick={() => onSelect(client.id)}
                        className="hover:bg-gray-800/50 cursor-pointer transition-colors animate-fade-in-up"
                        style={{ animationDelay: `${i * 50}ms` }}
                      >
                        <td className="px-6 py-4 text-gray-800 font-body">{client.nom}</td>
                        <td className="px-6 py-4 text-gray-800">{client.entreprise}</td>
                        <td className="px-6 py-4">
                          <div className="text-sm">
                            <div className="text-gray-800">{client.email}</div>
                            <div className="text-gray-600">{client.telephone}</div>
                          </div>
                        </td>
                        <td className="px-6 py-4">
                          <span className={`font-semibold ${client.balance > 0 ? 'text-orange-400' : 'text-green-400'}`}>
                            {client.balance.toLocaleString()} $
                          </span>
                        </td>
                        <td className="px-6 py-4 text-right">
                          <button
                            onClick={(e) => { e.stopPropagation(); goToEdit('client', client.id); }}
                            className="text-gray-600 hover:text-gray-800 transition-colors"
                          >
                            Modifier
                          </button>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </Card>
          </div>
        );
      };

      // Composant D√©tail Client
      const ClientDetail = ({ clientId, onBack }) => {
        const client = mockData.clients.find(c => c.id === clientId);
        if (!client) return <div>Client non trouv√©</div>;

        const clientCommandes = mockData.commandes.filter(c => c.clientId === clientId);

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label="Retour aux clients" />

            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-3xl font-display font-bold text-gray-800">{client.nom}</h1>
                <p className="text-lg text-gray-600">{client.entreprise}</p>
              </div>
              <div className="flex gap-3">
                <Button variant="secondary" onClick={() => goToEdit('client', clientId)}>Modifier</Button>
                <Button variant="ghost">Supprimer</Button>
              </div>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-4">Informations de contact</h3>
                <dl className="space-y-3">
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Email</dt>
                    <dd className="text-gray-800">{client.email}</dd>
                  </div>
                  <div>
                    <dt className="text-sm text-gray-600 font-body">T√©l√©phone</dt>
                    <dd className="text-gray-800">{client.telephone}</dd>
                  </div>
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Type</dt>
                    <dd className="text-gray-800">{client.type}</dd>
                  </div>
                </dl>
              </Card>

              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-4">Informations financi√®res</h3>
                <dl className="space-y-3">
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Limite de cr√©dit</dt>
                    <dd className="text-gray-800">{client.credit.toLocaleString()} $</dd>
                  </div>
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Balance actuelle</dt>
                    <dd className={`font-semibold ${client.balance > 0 ? 'text-orange-400' : 'text-green-400'}`}>
                      {client.balance.toLocaleString()} $
                    </dd>
                  </div>
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Derni√®re commande</dt>
                    <dd className="text-gray-800">{client.dernierCommande}</dd>
                  </div>
                </dl>
              </Card>
            </div>

            {/* Section des commandes r√©centes */}
            <Card className="p-6">
              <div className="flex items-center justify-between mb-4">
                <h3 className="font-display font-semibold text-gray-800">Commandes r√©centes</h3>
                <button
                  onClick={() => goToSubList('client', clientId, 'commande')}
                  className="text-sm text-gray-600 hover:text-gray-800 transition-colors flex items-center gap-1"
                >
                  Voir toutes les commandes
                  <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                  </svg>
                </button>
              </div>

              <div className="space-y-3">
                {clientCommandes.slice(0, 3).map(cmd => (
                  <div
                    key={cmd.id}
                    onClick={() => goToSubDetail('client', clientId, 'commande', cmd.id)}
                    className="p-4 bg-gray-900/30 rounded-lg hover:bg-gray-900/50 cursor-pointer transition-colors"
                  >
                    <div className="flex items-center justify-between">
                      <div>
                        <p className="font-medium text-gray-800">{cmd.numero}</p>
                        <p className="text-sm text-gray-600">{cmd.date} ‚Ä¢ {cmd.items} items</p>
                      </div>
                      <div className="text-right">
                        <p className="font-semibold text-gray-800">{cmd.montant.toLocaleString()} $</p>
                        <p className="text-sm text-gray-600">{cmd.statut}</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </Card>
          </div>
        );
      };

      // Composant Liste des Commandes d'un client (Niveau 3)
      const CommandesList = ({ clientId, onBack, onSelect }) => {
        const client = mockData.clients.find(c => c.id === clientId);
        const clientCommandes = mockData.commandes.filter(c => c.clientId === clientId);

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label={`Retour √† ${client.nom}`} />

            <div>
              <h1 className="text-2xl font-display font-bold text-gray-800">Commandes de {client.nom}</h1>
              <p className="text-gray-600">{client.entreprise}</p>
            </div>

            <Card className="overflow-hidden">
              <table className="w-full">
                <thead className="bg-gray-900/50 border-b border-gray-700">
                  <tr>
                    <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Num√©ro</th>
                    <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Date</th>
                    <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Statut</th>
                    <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Livraison</th>
                    <th className="px-6 py-4 text-right text-sm font-display font-medium text-gray-600">Montant</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-700">
                  {clientCommandes.map(cmd => (
                    <tr
                      key={cmd.id}
                      onClick={() => onSelect(cmd.id)}
                      className="hover:bg-gray-800/50 cursor-pointer transition-colors"
                    >
                      <td className="px-6 py-4 font-medium text-gray-800">{cmd.numero}</td>
                      <td className="px-6 py-4 text-gray-800">{cmd.date}</td>
                      <td className="px-6 py-4">
                        <span className={`px-2 py-1 text-xs rounded-full ${
                          cmd.statut === 'Livr√©e' ? 'bg-green-900/50 text-green-400' :
                          cmd.statut === 'En pr√©paration' ? 'bg-blue-900/50 text-blue-400' :
                          cmd.statut === 'Confirm√©e' ? 'bg-gray-700 text-gray-700' :
                          'bg-yellow-900/50 text-yellow-400'
                        }`}>
                          {cmd.statut}
                        </span>
                      </td>
                      <td className="px-6 py-4 text-gray-800">{cmd.livraison}</td>
                      <td className="px-6 py-4 text-right font-semibold text-gray-800">
                        {cmd.montant.toLocaleString()} $
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </Card>
          </div>
        );
      };

      // Composant D√©tail Commande (Niveau 4)
      const CommandeDetail = ({ commandeId, onBack, onEdit }) => {
        const commande = mockData.commandes.find(c => c.id === commandeId);
        const client = mockData.clients.find(c => c.id === commande?.clientId);

        if (!commande) return <div>Commande non trouv√©e</div>;

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label="Retour aux commandes" />

            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-2xl font-display font-bold text-gray-800">Commande {commande.numero}</h1>
                <p className="text-gray-600">{client.nom} - {client.entreprise}</p>
              </div>
              <Button onClick={() => onEdit()}>Modifier</Button>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-3">Informations</h3>
                <dl className="space-y-2">
                  <div>
                    <dt className="text-sm text-gray-600">Date commande</dt>
                    <dd className="text-gray-800">{commande.date}</dd>
                  </div>
                  <div>
                    <dt className="text-sm text-gray-600">Livraison pr√©vue</dt>
                    <dd className="text-gray-800">{commande.livraison}</dd>
                  </div>
                </dl>
              </Card>

              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-3">Statut</h3>
                <span className={`inline-block px-3 py-1.5 text-sm rounded-full ${
                  commande.statut === 'Livr√©e' ? 'bg-green-900/50 text-green-400' :
                  commande.statut === 'En pr√©paration' ? 'bg-blue-900/50 text-blue-400' :
                  'bg-yellow-900/50 text-yellow-400'
                }`}>
                  {commande.statut}
                </span>
              </Card>

              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-3">Total</h3>
                <p className="text-2xl font-bold text-gray-800">{commande.montant.toLocaleString()} $</p>
                <p className="text-sm text-gray-600">{commande.items} articles</p>
              </Card>
            </div>

            <Card className="p-6">
              <h3 className="font-display font-semibold text-gray-800 mb-4">Articles command√©s</h3>
              <div className="space-y-3">
                <div className="p-4 bg-gray-900/30 rounded-lg">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="font-medium text-gray-800">Plateau de sandwichs vari√©s</p>
                      <p className="text-sm text-gray-600">3 unit√©s √ó 65 $</p>
                    </div>
                    <p className="font-semibold text-gray-800">195 $</p>
                  </div>
                </div>
                <div className="p-4 bg-gray-900/30 rounded-lg">
                  <div className="flex items-center justify-between">
                    <div>
                      <p className="font-medium text-gray-800">Box √† lunch compl√®te</p>
                      <p className="text-sm text-gray-600">50 unit√©s √ó 18.50 $</p>
                    </div>
                    <p className="font-semibold text-gray-800">925 $</p>
                  </div>
                </div>
              </div>
            </Card>
          </div>
        );
      };

      // Composant √âdition Commande (Niveau 5)
      const CommandeEdit = ({ commandeId, onBack }) => {
        const commande = mockData.commandes.find(c => c.id === commandeId);
        const [formData, setFormData] = React.useState({
          statut: commande?.statut || '',
          livraison: commande?.livraison || ''
        });

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label="Retour au d√©tail" />

            <h1 className="text-2xl font-display font-bold text-gray-800">
              Modifier commande {commande?.numero}
            </h1>

            <Card className="p-6">
              <form className="space-y-4" onSubmit={(e) => {
                e.preventDefault();
                // Sauvegarder et retourner
                onBack();
              }}>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Statut
                  </label>
                  <select
                    value={formData.statut}
                    onChange={(e) => setFormData({...formData, statut: e.target.value})}
                    className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                  >
                    <option value="Confirm√©e">Confirm√©e</option>
                    <option value="En pr√©paration">En pr√©paration</option>
                    <option value="En production">En production</option>
                    <option value="Livr√©e">Livr√©e</option>
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Date et heure de livraison
                  </label>
                  <input
                    type="text"
                    value={formData.livraison}
                    onChange={(e) => setFormData({...formData, livraison: e.target.value})}
                    className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                  />
                </div>

                <div className="flex gap-3 pt-4">
                  <Button type="submit">Enregistrer</Button>
                  <Button type="button" variant="secondary" onClick={onBack}>Annuler</Button>
                </div>
              </form>
            </Card>
          </div>
        );
      };

      // Composant Production
      const Production = () => {
        const [showPrepList, setShowPrepList] = React.useState(false);
        const commandesJour = mockData.commandes.filter(c =>
          c.livraison.includes('2024-02-04') || c.livraison.includes('2024-02-05')
        );

        // G√©n√©rer la prep list en agr√©geant les ingr√©dients n√©cessaires
        const generatePrepList = () => {
          // Simuler une prep list bas√©e sur les commandes du jour
          const prepItems = [
            { ingredient: "Poulet grill√©", quantite: 8, unite: "kg", commandes: 3 },
            { ingredient: "Pain", quantite: 80, unite: "tranches", commandes: 3 },
            { ingredient: "Laitue", quantite: 4, unite: "kg", commandes: 3 },
            { ingredient: "Tomates", quantite: 2, unite: "kg", commandes: 3 },
            { ingredient: "Mayonnaise", quantite: 1, unite: "litre", commandes: 3 },
            { ingredient: "Wrap tortilla", quantite: 60, unite: "unit√©s", commandes: 2 },
            { ingredient: "Fromage", quantite: 3, unite: "kg", commandes: 2 },
            { ingredient: "Fruits frais vari√©s", quantite: 10, unite: "kg", commandes: 1 }
          ];
          return prepItems;
        };

        const prepList = generatePrepList();

        return (
          <div className="space-y-6">
            <div className="flex items-center justify-between">
              <h1 className="text-2xl font-display font-bold text-gray-800">Production du jour</h1>
              <Button onClick={() => setShowPrepList(!showPrepList)}>
                {showPrepList ? 'Masquer prep list' : 'G√©n√©rer prep list'}
              </Button>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
              <Card className="p-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-gray-600">√Ä pr√©parer</p>
                    <p className="text-2xl font-bold text-gray-800">5</p>
                  </div>
                  <div className="w-12 h-12 bg-yellow-900/20 rounded-lg flex items-center justify-center">
                    <span className="text-yellow-400">‚è≥</span>
                  </div>
                </div>
              </Card>

              <Card className="p-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-gray-600">En production</p>
                    <p className="text-2xl font-bold text-gray-800">3</p>
                  </div>
                  <div className="w-12 h-12 bg-blue-900/20 rounded-lg flex items-center justify-center">
                    <span className="text-blue-400">üî•</span>
                  </div>
                </div>
              </Card>

              <Card className="p-4">
                <div className="flex items-center justify-between">
                  <div>
                    <p className="text-sm text-gray-600">Termin√©es</p>
                    <p className="text-2xl font-bold text-gray-800">8</p>
                  </div>
                  <div className="w-12 h-12 bg-green-900/20 rounded-lg flex items-center justify-center">
                    <span className="text-green-400">‚úì</span>
                  </div>
                </div>
              </Card>
            </div>

            {/* Affichage de la prep list */}
            {showPrepList && (
              <Card className="overflow-hidden animate-fade-in">
                <div className="p-4 border-b border-gray-700 bg-gray-900/50">
                  <div className="flex items-center justify-between">
                    <h2 className="font-display font-semibold text-gray-800">Liste de pr√©paration</h2>
                    <div className="flex gap-2">
                      <Button size="sm" variant="secondary">Imprimer</Button>
                      <Button size="sm" variant="secondary">Exporter PDF</Button>
                    </div>
                  </div>
                </div>
                <div className="p-6">
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead className="border-b border-gray-700">
                        <tr>
                          <th className="pb-3 text-left text-sm font-medium text-gray-600">Ingr√©dient</th>
                          <th className="pb-3 text-left text-sm font-medium text-gray-600">Quantit√© totale</th>
                          <th className="pb-3 text-left text-sm font-medium text-gray-600">Nombre de commandes</th>
                          <th className="pb-3 text-left text-sm font-medium text-gray-600">Statut</th>
                        </tr>
                      </thead>
                      <tbody className="divide-y divide-gray-700">
                        {prepList.map((item, idx) => (
                          <tr key={idx} className="hover:bg-gray-800/50 transition-colors">
                            <td className="py-3 text-gray-800 font-medium">{item.ingredient}</td>
                            <td className="py-3 text-gray-800">
                              <span className="font-semibold">{item.quantite}</span> {item.unite}
                            </td>
                            <td className="py-3 text-gray-800">{item.commandes} commandes</td>
                            <td className="py-3">
                              <input
                                type="checkbox"
                                className="w-4 h-4 rounded border-gray-600 bg-gray-800 text-black focus:ring-black focus:ring-offset-0"
                              />
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>

                  <div className="mt-6 p-4 bg-gray-800/50 rounded-lg">
                    <h3 className="font-medium text-gray-800 mb-2">Notes de production:</h3>
                    <ul className="space-y-1 text-sm text-gray-600">
                      <li>‚Ä¢ Pr√©parer le poulet grill√© en premier (temps de cuisson: 20 min)</li>
                      <li>‚Ä¢ Laver et pr√©parer tous les l√©gumes frais</li>
                      <li>‚Ä¢ Assembler les plateaux de fruits en dernier pour la fra√Æcheur</li>
                      <li>‚Ä¢ V√©rifier les allerg√®nes pour chaque commande</li>
                    </ul>
                  </div>
                </div>
              </Card>
            )}

            <Card className="overflow-hidden">
              <div className="p-4 border-b border-gray-700">
                <h2 className="font-display font-semibold text-gray-800">Commandes √† produire</h2>
              </div>
              <div className="divide-y divide-gray-700">
                {commandesJour.map(cmd => {
                  const client = mockData.clients.find(c => c.id === cmd.clientId);
                  return (
                    <div key={cmd.id} className="p-4 hover:bg-gray-800/50 transition-colors">
                      <div className="flex items-center justify-between">
                        <div>
                          <p className="font-medium text-gray-800">{cmd.numero}</p>
                          <p className="text-sm text-gray-600">{client?.nom} ‚Ä¢ {cmd.items} items</p>
                          <p className="text-sm text-gray-500">Livraison: {cmd.livraison}</p>
                        </div>
                        <div className="flex items-center gap-3">
                          <span className={`px-2 py-1 text-xs rounded-full ${
                            cmd.statut === 'En production' ? 'bg-blue-900/50 text-blue-400' :
                            cmd.statut === 'En pr√©paration' ? 'bg-yellow-900/50 text-yellow-400' :
                            'bg-gray-700 text-gray-700'
                          }`}>
                            {cmd.statut}
                          </span>
                          <Button size="sm">Voir d√©tails</Button>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </Card>
          </div>
        );
      };

      // Composant Liste des Recettes
      const RecetteList = ({ onSelect }) => {
        const filteredRecettes = mockData.recettes.filter(recette =>
          recette.nom.toLowerCase().includes(searchTerm.toLowerCase())
        );

        return (
          <div className="space-y-6">
            <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
              <h1 className="text-2xl font-display font-bold text-gray-800">Recettes</h1>
              <div className="flex gap-3">
                <input
                  type="text"
                  placeholder="Rechercher..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-black/50 focus:border-transparent"
                />
                <Button onClick={() => { setModalType('recette'); setShowModal(true); }}>
                  Nouvelle recette
                </Button>
              </div>
            </div>

            <Card className="overflow-hidden">
              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="bg-gray-900/50 border-b border-gray-700">
                    <tr>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Nom</th>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Rendement</th>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Co√ªt mati√®re</th>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Temps pr√©paration</th>
                      <th className="px-6 py-4 text-left text-sm font-display font-medium text-gray-600">Allerg√®nes</th>
                      <th className="px-6 py-4 text-right text-sm font-display font-medium text-gray-600">Actions</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-700">
                    {filteredRecettes.map((recette, i) => (
                      <tr
                        key={recette.id}
                        onClick={() => onSelect(recette.id)}
                        className="hover:bg-gray-800/50 cursor-pointer transition-colors animate-fade-in-up"
                        style={{ animationDelay: `${i * 50}ms` }}
                      >
                        <td className="px-6 py-4 text-gray-800 font-body">{recette.nom}</td>
                        <td className="px-6 py-4 text-gray-800">{recette.rendement} {recette.unite}</td>
                        <td className="px-6 py-4">
                          <span className="font-semibold text-gray-800">{recette.coutMatiere.toFixed(2)} $</span>
                        </td>
                        <td className="px-6 py-4 text-gray-800">{recette.tempsPrepMinutes} min</td>
                        <td className="px-6 py-4">
                          {recette.allergenes.length > 0 ? (
                            <div className="flex flex-wrap gap-1">
                              {recette.allergenes.slice(0, 3).map((allergene, idx) => (
                                <span key={idx} className="inline-block px-2 py-0.5 text-xs bg-orange-900/50 text-orange-300 rounded">
                                  {allergene}
                                </span>
                              ))}
                              {recette.allergenes.length > 3 && (
                                <span className="text-xs text-gray-500">+{recette.allergenes.length - 3}</span>
                              )}
                            </div>
                          ) : (
                            <span className="text-gray-500 text-sm">Aucun</span>
                          )}
                        </td>
                        <td className="px-6 py-4 text-right">
                          <button
                            onClick={(e) => { e.stopPropagation(); goToEdit('recette', recette.id); }}
                            className="text-gray-600 hover:text-gray-800 transition-colors"
                          >
                            Modifier
                          </button>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </Card>
          </div>
        );
      };

      // Composant D√©tail Recette
      const RecetteDetail = ({ recetteId, onBack }) => {
        const recette = mockData.recettes.find(r => r.id === recetteId);
        if (!recette) return <div>Recette non trouv√©e</div>;

        // Simulated ingredients for the recipe
        const ingredients = [
          { nom: "Poulet grill√©", quantite: 2, unite: "kg", cout: 24.00 },
          { nom: "Pain", quantite: 20, unite: "tranches", cout: 3.50 },
          { nom: "Laitue", quantite: 1, unite: "kg", cout: 4.00 },
          { nom: "Tomates", quantite: 0.5, unite: "kg", cout: 2.00 },
          { nom: "Mayonnaise", quantite: 250, unite: "ml", cout: 1.50 },
        ];

        const coutTotal = ingredients.reduce((sum, ing) => sum + ing.cout, 0);
        const coutParPortion = coutTotal / recette.rendement;

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label="Retour aux recettes" />

            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-3xl font-display font-bold text-gray-800">{recette.nom}</h1>
                <p className="text-lg text-gray-600">Rendement: {recette.rendement} {recette.unite}</p>
              </div>
              <div className="flex gap-3">
                <Button variant="secondary" onClick={() => goToEdit('recette', recetteId)}>Modifier</Button>
                <Button>Imprimer</Button>
                <Button variant="ghost">Supprimer</Button>
              </div>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-4">Co√ªts</h3>
                <dl className="space-y-3">
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Co√ªt mati√®re total</dt>
                    <dd className="text-2xl font-bold text-gray-800">{coutTotal.toFixed(2)} $</dd>
                  </div>
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Co√ªt par portion</dt>
                    <dd className="text-xl font-semibold text-gray-800">{coutParPortion.toFixed(2)} $</dd>
                  </div>
                </dl>
              </Card>

              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-4">Temps</h3>
                <dl className="space-y-3">
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Temps de pr√©paration</dt>
                    <dd className="text-2xl font-bold text-gray-800">{recette.tempsPrepMinutes} min</dd>
                  </div>
                  <div>
                    <dt className="text-sm text-gray-600 font-body">Temps par portion</dt>
                    <dd className="text-xl font-semibold text-gray-800">
                      {(recette.tempsPrepMinutes / recette.rendement).toFixed(1)} min
                    </dd>
                  </div>
                </dl>
              </Card>

              <Card className="p-6">
                <h3 className="font-display font-semibold text-gray-800 mb-4">Allerg√®nes</h3>
                {recette.allergenes.length > 0 ? (
                  <div className="flex flex-wrap gap-2">
                    {recette.allergenes.map((allergene, idx) => (
                      <span key={idx} className="inline-block px-3 py-1 bg-orange-900/50 text-orange-300 rounded-lg">
                        {allergene}
                      </span>
                    ))}
                  </div>
                ) : (
                  <p className="text-gray-500">Aucun allerg√®ne d√©clar√©</p>
                )}
              </Card>
            </div>

            {/* Section des ingr√©dients */}
            <Card className="p-6">
              <div className="flex items-center justify-between mb-4">
                <h3 className="font-display font-semibold text-gray-800">Ingr√©dients</h3>
                <Button size="sm" onClick={() => goToSubList('recette', recetteId, 'ingredients')}>
                  G√©rer les ingr√©dients
                </Button>
              </div>

              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="border-b border-gray-700">
                    <tr>
                      <th className="pb-3 text-left text-sm font-medium text-gray-600">Ingr√©dient</th>
                      <th className="pb-3 text-left text-sm font-medium text-gray-600">Quantit√©</th>
                      <th className="pb-3 text-right text-sm font-medium text-gray-600">Co√ªt</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-700">
                    {ingredients.map((ing, idx) => (
                      <tr key={idx} className="group">
                        <td className="py-3 text-gray-800">{ing.nom}</td>
                        <td className="py-3 text-gray-800">{ing.quantite} {ing.unite}</td>
                        <td className="py-3 text-right font-semibold text-gray-800">{ing.cout.toFixed(2)} $</td>
                      </tr>
                    ))}
                    <tr className="border-t-2 border-gray-600">
                      <td colSpan={2} className="pt-3 text-right font-semibold text-gray-800">Total:</td>
                      <td className="pt-3 text-right font-bold text-xl text-gray-800">{coutTotal.toFixed(2)} $</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </Card>

            {/* Section des √©tapes de pr√©paration */}
            <Card className="p-6">
              <div className="flex items-center justify-between mb-4">
                <h3 className="font-display font-semibold text-gray-800">√âtapes de pr√©paration</h3>
                <Button size="sm" onClick={() => goToSubList('recette', recetteId, 'etapes')}>
                  G√©rer les √©tapes
                </Button>
              </div>

              <ol className="space-y-3">
                <li className="flex gap-3">
                  <span className="flex-shrink-0 w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-sm font-bold text-gray-700">1</span>
                  <p className="text-gray-800 pt-1">Griller le poulet √† 180¬∞C pendant 20 minutes jusqu'√† ce qu'il soit bien dor√©.</p>
                </li>
                <li className="flex gap-3">
                  <span className="flex-shrink-0 w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-sm font-bold text-gray-700">2</span>
                  <p className="text-gray-800 pt-1">Laisser refroidir et couper en tranches fines.</p>
                </li>
                <li className="flex gap-3">
                  <span className="flex-shrink-0 w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-sm font-bold text-gray-700">3</span>
                  <p className="text-gray-800 pt-1">Pr√©parer les l√©gumes : laver la laitue, trancher les tomates.</p>
                </li>
                <li className="flex gap-3">
                  <span className="flex-shrink-0 w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-sm font-bold text-gray-700">4</span>
                  <p className="text-gray-800 pt-1">Assembler les sandwichs en √©talant la mayonnaise, puis en ajoutant le poulet et les l√©gumes.</p>
                </li>
              </ol>
            </Card>
          </div>
        );
      };

      // Composant √âdition Recette
      const RecetteEdit = ({ recetteId, onBack }) => {
        const recette = mockData.recettes.find(r => r.id === recetteId);
        const [formData, setFormData] = React.useState({
          nom: recette?.nom || '',
          rendement: recette?.rendement || '',
          unite: recette?.unite || '',
          tempsPrepMinutes: recette?.tempsPrepMinutes || '',
          allergenes: recette?.allergenes.join(', ') || ''
        });

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label="Retour au d√©tail" />

            <h1 className="text-2xl font-display font-bold text-gray-800">
              {recetteId ? `Modifier ${recette?.nom}` : 'Nouvelle recette'}
            </h1>

            <Card className="p-6">
              <form className="space-y-6" onSubmit={(e) => {
                e.preventDefault();
                // Sauvegarder et retourner
                onBack();
              }}>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="md:col-span-2">
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Nom de la recette
                    </label>
                    <input
                      type="text"
                      value={formData.nom}
                      onChange={(e) => setFormData({...formData, nom: e.target.value})}
                      className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                      placeholder="Ex: Sandwich au poulet grill√©"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Rendement
                    </label>
                    <input
                      type="number"
                      value={formData.rendement}
                      onChange={(e) => setFormData({...formData, rendement: e.target.value})}
                      className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                      placeholder="10"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Unit√©
                    </label>
                    <select
                      value={formData.unite}
                      onChange={(e) => setFormData({...formData, unite: e.target.value})}
                      className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                    >
                      <option value="portions">portions</option>
                      <option value="unit√©s">unit√©s</option>
                      <option value="litres">litres</option>
                      <option value="kg">kg</option>
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Temps de pr√©paration (minutes)
                    </label>
                    <input
                      type="number"
                      value={formData.tempsPrepMinutes}
                      onChange={(e) => setFormData({...formData, tempsPrepMinutes: e.target.value})}
                      className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                      placeholder="30"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Allerg√®nes (s√©par√©s par des virgules)
                    </label>
                    <input
                      type="text"
                      value={formData.allergenes}
                      onChange={(e) => setFormData({...formData, allergenes: e.target.value})}
                      className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                      placeholder="Gluten, ≈íufs, Lait"
                    />
                  </div>
                </div>

                <div className="flex gap-3 pt-4 border-t border-gray-700">
                  <Button type="submit">Enregistrer</Button>
                  <Button type="button" variant="secondary" onClick={onBack}>Annuler</Button>
                </div>
              </form>
            </Card>
          </div>
        );
      };

      // Composant Liste des Ingr√©dients d'une recette
      const IngredientsList = ({ recetteId, onBack }) => {
        const recette = mockData.recettes.find(r => r.id === recetteId);
        const [ingredients, setIngredients] = React.useState([
          { id: 1, nom: "Poulet grill√©", quantite: 2, unite: "kg", cout: 24.00 },
          { id: 2, nom: "Pain", quantite: 20, unite: "tranches", cout: 3.50 },
          { id: 3, nom: "Laitue", quantite: 1, unite: "kg", cout: 4.00 },
          { id: 4, nom: "Tomates", quantite: 0.5, unite: "kg", cout: 2.00 },
          { id: 5, nom: "Mayonnaise", quantite: 250, unite: "ml", cout: 1.50 },
        ]);

        const coutTotal = ingredients.reduce((sum, ing) => sum + ing.cout, 0);

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label={`Retour √† ${recette?.nom}`} />

            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-2xl font-display font-bold text-gray-800">Ingr√©dients</h1>
                <p className="text-gray-600">{recette?.nom}</p>
              </div>
              <Button>Ajouter un ingr√©dient</Button>
            </div>

            <Card className="overflow-hidden">
              <div className="p-4 border-b border-gray-700 bg-gray-900/50">
                <div className="flex items-center justify-between">
                  <span className="text-sm font-medium text-gray-600">Co√ªt total des ingr√©dients</span>
                  <span className="text-xl font-bold text-gray-800">{coutTotal.toFixed(2)} $</span>
                </div>
              </div>

              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="bg-gray-900/30 border-b border-gray-700">
                    <tr>
                      <th className="px-6 py-4 text-left text-sm font-medium text-gray-600">Ingr√©dient</th>
                      <th className="px-6 py-4 text-left text-sm font-medium text-gray-600">Quantit√©</th>
                      <th className="px-6 py-4 text-left text-sm font-medium text-gray-600">Co√ªt unitaire</th>
                      <th className="px-6 py-4 text-right text-sm font-medium text-gray-600">Co√ªt total</th>
                      <th className="px-6 py-4 text-right text-sm font-medium text-gray-600">Actions</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-700">
                    {ingredients.map((ing) => (
                      <tr key={ing.id} className="hover:bg-gray-800/50 transition-colors">
                        <td className="px-6 py-4 text-gray-800">{ing.nom}</td>
                        <td className="px-6 py-4 text-gray-800">{ing.quantite} {ing.unite}</td>
                        <td className="px-6 py-4 text-gray-800">{(ing.cout / ing.quantite).toFixed(2)} $</td>
                        <td className="px-6 py-4 text-right font-semibold text-gray-800">{ing.cout.toFixed(2)} $</td>
                        <td className="px-6 py-4 text-right">
                          <div className="flex items-center justify-end gap-2">
                            <button className="text-gray-600 hover:text-gray-800 transition-colors">
                              Modifier
                            </button>
                            <button className="text-red-400 hover:text-red-300 transition-colors">
                              Retirer
                            </button>
                          </div>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </Card>
          </div>
        );
      };

      // Composant Liste des √âtapes d'une recette
      const EtapesList = ({ recetteId, onBack }) => {
        const recette = mockData.recettes.find(r => r.id === recetteId);
        const [etapes, setEtapes] = React.useState([
          { id: 1, ordre: 1, description: "Griller le poulet √† 180¬∞C pendant 20 minutes jusqu'√† ce qu'il soit bien dor√©.", duree: 20 },
          { id: 2, ordre: 2, description: "Laisser refroidir et couper en tranches fines.", duree: 5 },
          { id: 3, ordre: 3, description: "Pr√©parer les l√©gumes : laver la laitue, trancher les tomates.", duree: 10 },
          { id: 4, ordre: 4, description: "Assembler les sandwichs en √©talant la mayonnaise, puis en ajoutant le poulet et les l√©gumes.", duree: 15 }
        ]);

        const dureeTotal = etapes.reduce((sum, etape) => sum + etape.duree, 0);

        return (
          <div className="space-y-6">
            <BackButton onClick={onBack} label={`Retour √† ${recette?.nom}`} />

            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-2xl font-display font-bold text-gray-800">√âtapes de pr√©paration</h1>
                <p className="text-gray-600">{recette?.nom}</p>
              </div>
              <Button>Ajouter une √©tape</Button>
            </div>

            <Card className="p-6">
              <div className="mb-4 p-4 bg-gray-900/50 rounded-lg">
                <div className="flex items-center justify-between">
                  <span className="text-sm font-medium text-gray-600">Dur√©e totale de pr√©paration</span>
                  <span className="text-xl font-bold text-gray-800">{dureeTotal} minutes</span>
                </div>
              </div>

              <div className="space-y-4">
                {etapes.map((etape) => (
                  <div key={etape.id} className="flex gap-4 p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800 transition-colors">
                    <div className="flex-shrink-0">
                      <div className="w-10 h-10 bg-black rounded-full flex items-center justify-center">
                        <span className="font-bold text-white">{etape.ordre}</span>
                      </div>
                    </div>
                    <div className="flex-1">
                      <p className="text-gray-800">{etape.description}</p>
                      <p className="text-sm text-gray-600 mt-1">Dur√©e: {etape.duree} min</p>
                    </div>
                    <div className="flex items-start gap-2">
                      <button className="text-gray-600 hover:text-gray-800 transition-colors">
                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                        </svg>
                      </button>
                      <button className="text-red-400 hover:text-red-300 transition-colors">
                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                      </button>
                    </div>
                  </div>
                ))}
              </div>

              <div className="mt-6 flex justify-end">
                <Button variant="secondary">R√©organiser les √©tapes</Button>
              </div>
            </Card>
          </div>
        );
      };

      // Composant Punch pour check-in/check-out des employ√©s
      const Punch = () => {
        const [pin, setPin] = React.useState('');
        const [message, setMessage] = React.useState('');
        const [messageType, setMessageType] = React.useState(''); // 'success', 'error'
        const [currentEmployee, setCurrentEmployee] = React.useState(null);
        const [punchHistory, setPunchHistory] = React.useState(() => {
          // R√©cup√©rer l'historique depuis localStorage
          const saved = localStorage.getItem('punchHistory');
          return saved ? JSON.parse(saved) : [];
        });

        // Donn√©es mock√©es des employ√©s avec leurs PINs
        const employees = [
          { id: 1, nom: "Martin Leblanc", pin: "1234", role: "Chef cuisinier" },
          { id: 2, nom: "Julie Tremblay", pin: "5678", role: "Aide-cuisini√®re" },
          { id: 3, nom: "Fran√ßois Gagnon", pin: "9012", role: "Livreur" },
          { id: 4, nom: "Sophie Roy", pin: "3456", role: "Service traiteur" },
          { id: 5, nom: "Alexandre Dubois", pin: "7890", role: "Pr√©paration" }
        ];

        // Fonction pour g√©rer l'entr√©e du PIN
        const handlePinEntry = (digit) => {
          if (pin.length < 4) {
            const newPin = pin + digit;
            setPin(newPin);

            // V√©rifier automatiquement le PIN quand on atteint 4 chiffres
            if (newPin.length === 4) {
              const employee = employees.find(emp => emp.pin === newPin);
              if (employee) {
                setCurrentEmployee(employee);
                setMessage('');
                setMessageType('');
              } else {
                setMessage('PIN invalide');
                setMessageType('error');
                setTimeout(() => {
                  setPin('');
                  setMessage('');
                }, 1500);
              }
            }
          }
        };

        // Fonction pour effacer le PIN
        const clearPin = () => {
          setPin('');
          setCurrentEmployee(null);
          setMessage('');
          setMessageType('');
        };

        // Fonction pour g√©rer le punch (check-in ou check-out)
        const handlePunch = (type) => {
          if (!currentEmployee) return;

          const now = new Date();
          const punch = {
            id: Date.now(),
            employeeId: currentEmployee.id,
            employeeName: currentEmployee.nom,
            type: type,
            timestamp: now.toISOString(),
            date: now.toLocaleDateString('fr-CA'),
            time: now.toLocaleTimeString('fr-CA', { hour: '2-digit', minute: '2-digit' })
          };

          // Ajouter √† l'historique
          const newHistory = [punch, ...punchHistory];
          setPunchHistory(newHistory);
          localStorage.setItem('punchHistory', JSON.stringify(newHistory));

          // Afficher le message de confirmation
          setMessage(`${type === 'in' ? 'Check-in' : 'Check-out'} enregistr√© pour ${currentEmployee.nom}`);
          setMessageType('success');

          // R√©initialiser apr√®s 2 secondes
          setTimeout(() => {
            clearPin();
          }, 2000);
        };

        // Obtenir les punches du jour
        const today = new Date().toLocaleDateString('fr-CA');
        const todayPunches = punchHistory.filter(p => p.date === today);

        // Calculer le statut de chaque employ√©
        const employeeStatuses = employees.map(emp => {
          const empPunches = todayPunches.filter(p => p.employeeId === emp.id);
          const lastPunch = empPunches[0];
          return {
            ...emp,
            status: lastPunch ? (lastPunch.type === 'in' ? 'Pr√©sent' : 'Absent') : 'Absent',
            lastPunchTime: lastPunch ? lastPunch.time : null,
            lastPunchType: lastPunch ? lastPunch.type : null
          };
        });

        return (
          <div className="max-w-6xl mx-auto space-y-8">
            <div className="flex items-center justify-between">
              <h1 className="text-3xl font-display font-bold text-gray-800">Syst√®me de punch</h1>
              <div className="text-sm text-gray-600">
                {new Date().toLocaleDateString('fr-CA')} ‚Ä¢ {new Date().toLocaleTimeString('fr-CA', { hour: '2-digit', minute: '2-digit' })}
              </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              {/* Panneau de punch */}
              <Card className="p-8">
                <h2 className="text-xl font-display font-semibold text-gray-800 mb-6 text-center">
                  {currentEmployee ? `Bienvenue, ${currentEmployee.nom}` : 'Entrez votre PIN'}
                </h2>

                {/* Affichage du PIN */}
                <div className="flex justify-center mb-8">
                  <div className="flex gap-3">
                    {[0, 1, 2, 3].map((index) => (
                      <div
                        key={index}
                        className="w-16 h-16 bg-gray-800 rounded-lg flex items-center justify-center text-2xl font-bold text-gray-800 border-2 border-gray-700"
                      >
                        {pin[index] ? '‚Ä¢' : ''}
                      </div>
                    ))}
                  </div>
                </div>

                {/* Message de feedback */}
                {message && (
                  <div className={`mb-6 p-4 rounded-lg text-center animate-fade-in ${
                    messageType === 'success' ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'
                  }`}>
                    {message}
                  </div>
                )}

                {!currentEmployee ? (
                  /* Clavier num√©rique */
                  <div className="grid grid-cols-3 gap-4 max-w-xs mx-auto">
                    {[1, 2, 3, 4, 5, 6, 7, 8, 9].map((num) => (
                      <button
                        key={num}
                        onClick={() => handlePinEntry(num.toString())}
                        className="h-20 bg-gray-800 hover:bg-gray-700 rounded-xl text-2xl font-bold text-gray-800 transition-all hover:scale-105 active:scale-95"
                      >
                        {num}
                      </button>
                    ))}
                    <button
                      onClick={clearPin}
                      className="h-20 bg-gray-800 hover:bg-gray-700 rounded-xl text-gray-600 transition-all hover:scale-105 active:scale-95"
                    >
                      <svg className="w-8 h-8 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M3 12l6.414 6.414a2 2 0 001.414.586H19a2 2 0 002-2V7a2 2 0 00-2-2h-8.172a2 2 0 00-1.414.586L3 12z" />
                      </svg>
                    </button>
                    <button
                      onClick={() => handlePinEntry('0')}
                      className="h-20 bg-gray-800 hover:bg-gray-700 rounded-xl text-2xl font-bold text-gray-800 transition-all hover:scale-105 active:scale-95"
                    >
                      0
                    </button>
                    <button
                      onClick={clearPin}
                      className="h-20 bg-gray-800 hover:bg-gray-700 rounded-xl text-gray-600 transition-all hover:scale-105 active:scale-95"
                    >
                      <svg className="w-8 h-8 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                      </svg>
                    </button>
                  </div>
                ) : (
                  /* Boutons Check-in/Check-out */
                  <div className="space-y-4">
                    <button
                      onClick={() => handlePunch('in')}
                      className="w-full h-32 bg-green-700 hover:bg-green-600 rounded-xl text-3xl font-bold text-white transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-4"
                    >
                      <svg className="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      CHECK-IN
                    </button>
                    <button
                      onClick={() => handlePunch('out')}
                      className="w-full h-32 bg-red-700 hover:bg-red-600 rounded-xl text-3xl font-bold text-white transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-4"
                    >
                      <svg className="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z" />
                      </svg>
                      CHECK-OUT
                    </button>
                    <button
                      onClick={clearPin}
                      className="w-full py-3 bg-gray-800 hover:bg-gray-700 rounded-lg text-gray-600 transition-all"
                    >
                      Annuler
                    </button>
                  </div>
                )}
              </Card>

              {/* Panneau de statut des employ√©s */}
              <Card className="p-8">
                <h2 className="text-xl font-display font-semibold text-gray-800 mb-6">Pr√©sences du jour</h2>

                <div className="space-y-3">
                  {employeeStatuses.map((emp) => (
                    <div
                      key={emp.id}
                      className="p-4 bg-gray-800/50 rounded-lg flex items-center justify-between"
                    >
                      <div>
                        <p className="font-medium text-gray-800">{emp.nom}</p>
                        <p className="text-sm text-gray-600">{emp.role}</p>
                      </div>
                      <div className="text-right">
                        <span className={`inline-block px-3 py-1 rounded-full text-sm font-medium ${
                          emp.status === 'Pr√©sent' ? 'bg-green-900/50 text-green-400' : 'bg-gray-700 text-gray-600'
                        }`}>
                          {emp.status}
                        </span>
                        {emp.lastPunchTime && (
                          <p className="text-xs text-gray-500 mt-1">
                            {emp.lastPunchType === 'in' ? 'Arriv√©e' : 'D√©part'}: {emp.lastPunchTime}
                          </p>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              </Card>
            </div>

            {/* Historique des punches r√©cents */}
            <Card className="p-6">
              <h3 className="text-lg font-display font-semibold text-gray-800 mb-4">Activit√© r√©cente</h3>
              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead className="border-b border-gray-700">
                    <tr>
                      <th className="pb-3 text-left text-sm font-medium text-gray-600">Employ√©</th>
                      <th className="pb-3 text-left text-sm font-medium text-gray-600">Type</th>
                      <th className="pb-3 text-left text-sm font-medium text-gray-600">Date</th>
                      <th className="pb-3 text-left text-sm font-medium text-gray-600">Heure</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-gray-700">
                    {todayPunches.slice(0, 10).map((punch) => (
                      <tr key={punch.id} className="animate-fade-in">
                        <td className="py-3 text-gray-800">{punch.employeeName}</td>
                        <td className="py-3">
                          <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${
                            punch.type === 'in' ? 'bg-green-900/50 text-green-400' : 'bg-red-900/50 text-red-400'
                          }`}>
                            {punch.type === 'in' ? 'Check-in' : 'Check-out'}
                          </span>
                        </td>
                        <td className="py-3 text-gray-800">{punch.date}</td>
                        <td className="py-3 text-gray-800">{punch.time}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
                {todayPunches.length === 0 && (
                  <p className="text-center text-gray-500 py-8">Aucune activit√© aujourd'hui</p>
                )}
              </div>
            </Card>
          </div>
        );
      };

      // Navigation et menu principal
      const menuItems = [
        { id: 'dashboard', label: 'Tableau de bord', icon: 'üìä' },
        { id: 'demandes', label: 'Demandes', icon: 'üìß' },
        { id: 'clients', label: 'Clients', icon: 'üë•' },
        { id: 'soumissions', label: 'Soumissions', icon: 'üíº' },
        { id: 'production', label: 'Production', icon: 'üë®‚Äçüç≥' },
        { id: 'recettes', label: 'Recettes', icon: 'üìù' },
        { id: 'inventaire', label: 'Inventaire', icon: 'üì¶' },
        { id: 'factures', label: 'Facturation', icon: 'üí∞' },
        { id: 'rapports', label: 'Rapports', icon: 'üìà' },
        { id: 'punch', label: 'Punch', icon: '‚è∞' }
      ];

      return (
        <div className="min-h-screen bg-gray-50">
          {/* Header avec logo */}
          <header className="bg-white border-b border-gray-200 shadow-sm">
            <div className="container mx-auto px-4 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-4">
                  <img
                    src="https://lebangard.com/favicon-192x192.png"
                    alt="Le Bangard Inc."
                    className="h-10 w-10"
                    onError={(e) => { e.target.src = "https://lebangard.com/favicon-180x180.png"; }}
                  />
                  <h1 className="text-xl font-display font-bold text-gray-900">Le Bangard Inc.</h1>
                </div>
                <div className="flex items-center gap-4">
                  <span className="text-sm text-gray-600">Gestion Traiteur</span>
                </div>
              </div>
            </div>
          </header>

          <div className="flex">
            {/* Sidebar */}
            <aside className="hidden lg:block w-64 bg-white border-r border-gray-200 min-h-screen shadow-sm">
              <nav className="p-4 space-y-1">
                {menuItems.map((item) => (
                  <button
                    key={item.id}
                    onClick={() => {
                      setActiveTab(item.id);
                      setView({ screen: 'list', entityType: null, entityId: null, subEntityType: null, subEntityId: null });
                      setSearchTerm('');
                    }}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-body ${
                      activeTab === item.id
                        ? 'bg-blue-600 text-white shadow-md'
                        : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'
                    }`}
                  >
                    <span className="text-xl opacity-70">{item.icon}</span>
                    <span className="font-medium">{item.label}</span>
                  </button>
                ))}
              </nav>
            </aside>

            {/* Navigation mobile */}
            <nav className="lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50">
              <div className="grid grid-cols-5 gap-1 p-2">
                {[menuItems[0], menuItems[2], menuItems[4], menuItems[5], menuItems[9]].map((item) => (
                  <button
                    key={item.id}
                    onClick={() => {
                      setActiveTab(item.id);
                      setView({ screen: 'list', entityType: null, entityId: null, subEntityType: null, subEntityId: null });
                      setSearchTerm('');
                    }}
                    className={`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors ${
                      activeTab === item.id
                        ? 'bg-blue-600 text-white'
                        : 'text-gray-600'
                    }`}
                  >
                    <span className="text-xl">{item.icon}</span>
                    <span className="text-xs font-body">{item.label}</span>
                  </button>
                ))}
              </div>
            </nav>

            {/* Contenu principal */}
            <main className="flex-1 p-4 md:p-8 pb-20 lg:pb-8">
              <div className="container mx-auto max-w-7xl">
                {activeTab === 'dashboard' && <Dashboard />}

                {activeTab === 'clients' && (
                  <>
                    {view.screen === 'list' && (
                      <ClientList onSelect={(id) => goToDetail('client', id)} />
                    )}
                    {view.screen === 'detail' && view.entityType === 'client' && (
                      <ClientDetail
                        clientId={view.entityId}
                        onBack={() => goToList('client')}
                      />
                    )}
                    {view.screen === 'sublist' && view.subEntityType === 'commande' && (
                      <CommandesList
                        clientId={view.entityId}
                        onBack={() => goToDetail('client', view.entityId)}
                        onSelect={(cmdId) => goToSubDetail('client', view.entityId, 'commande', cmdId)}
                      />
                    )}
                    {view.screen === 'subdetail' && view.subEntityType === 'commande' && (
                      <CommandeDetail
                        commandeId={view.subEntityId}
                        onBack={() => goToSubList('client', view.entityId, 'commande')}
                        onEdit={() => goToSubEdit('client', view.entityId, 'commande', view.subEntityId)}
                      />
                    )}
                    {view.screen === 'subedit' && view.subEntityType === 'commande' && (
                      <CommandeEdit
                        commandeId={view.subEntityId}
                        onBack={() => goToSubDetail('client', view.entityId, 'commande', view.subEntityId)}
                      />
                    )}
                  </>
                )}

                {activeTab === 'production' && <Production />}

                {activeTab === 'recettes' && (
                  <>
                    {view.screen === 'list' && (
                      <RecetteList onSelect={(id) => goToDetail('recette', id)} />
                    )}
                    {view.screen === 'detail' && view.entityType === 'recette' && (
                      <RecetteDetail
                        recetteId={view.entityId}
                        onBack={() => goToList('recette')}
                      />
                    )}
                    {view.screen === 'edit' && view.entityType === 'recette' && (
                      <RecetteEdit
                        recetteId={view.entityId}
                        onBack={() => view.entityId ? goToDetail('recette', view.entityId) : goToList('recette')}
                      />
                    )}
                    {view.screen === 'sublist' && view.subEntityType === 'ingredients' && (
                      <IngredientsList
                        recetteId={view.entityId}
                        onBack={() => goToDetail('recette', view.entityId)}
                      />
                    )}
                    {view.screen === 'sublist' && view.subEntityType === 'etapes' && (
                      <EtapesList
                        recetteId={view.entityId}
                        onBack={() => goToDetail('recette', view.entityId)}
                      />
                    )}
                  </>
                )}

                {activeTab === 'punch' && <Punch />}

                {/* Autres onglets √† impl√©menter */}
                {['demandes', 'soumissions', 'inventaire', 'factures', 'rapports'].includes(activeTab) && (
                  <div className="space-y-6">
                    <h1 className="text-2xl font-display font-bold text-gray-800 capitalize">{activeTab}</h1>
                    <Card className="p-8 text-center">
                      <p className="text-gray-600">Module {activeTab} - En d√©veloppement</p>
                    </Card>
                  </div>
                )}
              </div>
            </main>
          </div>

          {/* Modal exemple */}
          {showModal && (
            <div className="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
              <Card className="w-full max-w-md animate-scale-in">
                <div className="p-6">
                  <h2 className="text-xl font-display font-semibold text-gray-800 mb-4">
                    {modalType === 'recette' ? 'Nouvelle recette' : 'Nouveau client'}
                  </h2>
                  <form className="space-y-4" onSubmit={(e) => { e.preventDefault(); setShowModal(false); }}>
                    {modalType === 'client' ? (
                      <>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-1">Nom</label>
                          <input
                            type="text"
                            className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                            placeholder="Jean Tremblay"
                          />
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-1">Entreprise</label>
                          <input
                            type="text"
                            className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                            placeholder="Restaurant ABC"
                          />
                        </div>
                      </>
                    ) : (
                      <>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-1">Nom de la recette</label>
                          <input
                            type="text"
                            className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                            placeholder="Ex: Plateau de sandwichs vari√©s"
                          />
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Rendement</label>
                            <input
                              type="number"
                              className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50"
                              placeholder="10"
                            />
                          </div>
                          <div>
                            <label className="block text-sm font-medium text-gray-700 mb-1">Unit√©</label>
                            <select className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50">
                              <option value="portions">portions</option>
                              <option value="unit√©s">unit√©s</option>
                              <option value="litres">litres</option>
                              <option value="kg">kg</option>
                            </select>
                          </div>
                        </div>
                        <div>
                          <label className="block text-sm font-medium text-gray-700 mb-1">Cat√©gorie</label>
                          <select className="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-black/50">
                            <option value="">S√©lectionner une cat√©gorie</option>
                            <option value="Sandwichs">Sandwichs</option>
                            <option value="Salades">Salades</option>
                            <option value="Wraps">Wraps</option>
                            <option value="Plateaux">Plateaux</option>
                            <option value="Soupes">Soupes</option>
                            <option value="Desserts">Desserts</option>
                            <option value="Plats chauds">Plats chauds</option>
                            <option value="Bouch√©es">Bouch√©es</option>
                          </select>
                        </div>
                      </>
                    )}
                    <div className="flex gap-3 pt-4">
                      <Button type="submit">Cr√©er</Button>
                      <Button type="button" variant="secondary" onClick={() => setShowModal(false)}>
                        Annuler
                      </Button>
                    </div>
                  </form>
                </div>
              </Card>
            </div>
          )}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>